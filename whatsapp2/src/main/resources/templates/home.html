<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org"
	xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6">

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
		integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous" />
	<script type="text/javascript" src="https://unpkg.com/xlsx@0.15.1/dist/xlsx.full.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
	<script src="/webjars/jquery/jquery.min.js"></script>
	<script src="/webjars/sockjs-client/sockjs.min.js"></script>
	<script src="/webjars/stomp-websocket/stomp.min.js"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
	<link rel="stylesheet" th:href="@{/css/home.css}" />
	<link rel="stylesheet" th:href="@{/css/hamburger.css}">
	<script defer th:type="module" th:src="@{/js/home.js}"></script>
	<link rel="icon" type="image/x-icon" th:href="@{/img/imav-icon.jpg}">
	<title>Enviar Agenda</title>
</head>

<body>

	<div id="username" sec:authentication="name"></div>
	
	<label class="hamburger" onclick="toggleHamburger(this)">
		<div class="bar1"></div>
		<div class="bar2"></div>
		<div class="bar3"></div>
	</label>

	<nav class="nav-bar">
		<ul id="div-ul">
			<div sec:authorize="hasAuthority('NF')">
				<li><a onclick="disconnect()" th:href="particular">NF Particular</a></li>
				<li><a onclick="disconnect()" th:href="notafiscal">Nota Fiscal</a></li>
			</div>

			<div sec:authorize="hasAuthority('USER')">
				<li><a onclick="disconnect()" th:href="particular">NF Particular</a></li>
				<li><a onclick="disconnect()" th:href="notafiscal">Nota Fiscal</a></li>
				<li><a onclick="disconnect()" id="active" class="active" th:href="home">Enviar Agenda</a></li>
				<li><a onclick="disconnect()" th:href="chat">Chat</a></li>
				<li><a onclick="disconnect()" th:href="confirmation">Confirma√ß√£o</a></li>
			</div>

			<div sec:authorize="hasAuthority('ADMIN')">
				<li><a onclick="disconnect()" th:href="particular">NF Particular</a></li>
				<li><a onclick="disconnect()" th:href="notafiscal">Nota Fiscal</a></li>
				<li><a onclick="disconnect()" id="active" class="active" th:href="home">Enviar Agenda</a></li>
				<li><a onclick="disconnect()" th:href="chat">Chat</a></li>
				<li><a onclick="disconnect()" th:href="confirmation">Confirma√ß√£o</a></li>
				<li><a onclick="disconnect()" th:href="register">Novo Usu√°rio</a></li>
				<li><a onclick="disconnect()" th:href="settings">Configura√ß√µes</a></li>
			</div>

			<div id="exit-config">
				<li class="exit">
					<a onclick="disconnect()" th:href="@{/logout}"><i class="fa fa-sign-out fa-1.5x" aria-hidden="true">
							Sair</i></a>
				</li>
				<li class="exit">
					<a onclick="disconnect()" th:href="config"><i class="fa fa-user fa-1.5x" aria-hidden="true"><span>
							</span><span id="my-username">
								<span th:remove="tag" sec:authentication="name"></span></span></i></a>
				</li>
			</div>

			<li id="exit" class="exit">
				<!-- websocket alert  -->
			</li>
		</ul>
	</nav>

	<div class="home-div">
		<div class="container">
			<div class="card">
				<div class="card-body">
					<!-- This input is working as a button  -->
					<input type="file" id="excel_file" />
					<!-- Export  -->
					<button type="button" id="export_button" class="btn btn-success btn-sm">
						Exportar para XLS (Excel)
					</button>

				</div>
			</div>
			<div id="excel_data" class="mt-3"></div>
		</div>

		<div class="showcase" id="showcase"></div>

	</div>

	<div id="send-div" class="home-div">
		<div class="container-send">
			<h6>Mensagem Individual</h6>
			<hr />
			<div class="telephone-div">
				<label for="telephone">Telefone</label>
				<div id="select-div">
					<!-- select goes here -->
				</div>
				<input id="telephone" type="text" class="form-control" placeholder="N√∫mero de telefone" required>
			</div>

			<label for="name">Nome</label>
			<input onkeyup="updateTemplateName(this)" id="name" type="text" class="form-control" placeholder="Nome do paciente" required>
			<br>
			<label for="textarea">Mensagem</label>
			<p id="text-p">Ol√° <b id="name-b">{nome}</b>, espero que esteja bem. üòä Somos da IMAV, Intituto de Medicina Avan√ßada da Vis√£o.</p>
			<textarea class="form-control" id="textarea" rows="3" placeholder="Escreva a mensagem aqui..."
				required></textarea>
	
			<button onclick="validateMessage()" id="btn-send" class="btn btn-success btn-sm">Enviar</button>
			<br>
		</div>
	</div>


	<!-- The Modal -->
	<div id="myModal" class="modal">
		<!-- Modal content -->
		<div class="modal-content">
			<div class="form-save">
				<div class="container2">
					<div for="waiting"><b>Enviando mensagens, aguarde </b></div>
					<div class="col-3">
						<div class="snippet" data-title="dot-typing">
							<div class="stage">
								<div class="dot-typing"></div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	
	<div id="snackbarOk">Mensagem enviada com sucesso..</div>
	<div id="snackbarError">Erro, mensagem n√£o enviada..</div>

</body>

</html>